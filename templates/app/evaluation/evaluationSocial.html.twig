{% extends "model/collapseCard.html.twig" %}

{% set id = "eval_social" %}

{% block card_title %}Social{% endblock %}

{% block card_body %}

<div class="row">
    <div class="col-md-12 accordion" id="accordion-eval_social">
        <div class="mb-4">
            {% for key, evalPerson in form_evaluationPeople_filteredByRole %}
			{% set person = evalPerson.vars.value.supportPerson.person %}
            <button type="button" id="heading-eval_social-{{ key }}" class="btn btn-outline-{{ theme_color }} {% if loop.first %}active{% endif %} mb-2 js-person"
                data-toggle="collapse" data-target="#collapse-eval_social-{{ key }}" aria-expanded="false"
                aria-controls="collapse-eval_social-{{ key }}" data-key="{{ key }}">{{ person.fullname}}</button>
            {% endfor %}
        </div>

        {% for key, evalPerson in form_evaluationPeople_filteredByRole %}
        <div id="collapse-eval_social-{{ key }}" class="collapse {% if loop.first %}show{% endif %} my-3"
            aria-labelledby="heading-eval_social-{{ key }}" data-parent="#accordion-eval_social" data-support-id="p-{{ evalPerson.vars.value.supportPerson.id }}">
            <div class="form-group row">
                <div class="col-md-6">{{ form_row(evalPerson.evalSocialPerson.rightSocialSecurity) }}</div>
                <div class="col-md-6 js-{{ key }}_evalSocialPerson_rightSocialSecurity d-block">
                    {{ form_row(evalPerson.evalSocialPerson.socialSecurity) }}</div>
                <div class="col-md-6 js-{{ key }}_evalSocialPerson_rightSocialSecurity d-block">
                    {{ form_row(evalPerson.evalSocialPerson.endRightsSocialSecurityDate) }}</div>
                <div class="col-md-6 js-{{ key }}_evalSocialPerson_rightSocialSecurity d-block">
                    {{ form_row(evalPerson.evalSocialPerson.socialSecurityOffice) }}</div>
            </div>

            <div class="form-group row">
                <div class="col-md-6">{{ form_row(evalPerson.evalSocialPerson.healthProblem) }}</div>
				<div class="col-md-6 js-{{ key }}_evalSocialPerson_healthProblem d-block">
					<div class="row">
						<div class="col-form-label col-sm-4">Type de problématiques de santé</div>
						<div class="col-sm-8">
							<select id="js-{{ key }}_evalSocialPerson_healthProblemType"
								name="js-{{ key }}_evalSocialPerson_healthProblemType" class="form-control">
                                <option class="default" value="">-- Ajouter --</option>
                                <option value="physicalHealthProblem">Problématique de santé physique</option>
                                <option value="mentalHealthProblem">Problématique de santé mentale</option>
                                <option value="addictionProblem">Problématique d'addiction</option>
                                <option value="reducedMobility">Personne à mobilité réduite</option>
							</select>
						</div>
						<div class="col-md-12 mt-3">
							<div class="table-responsive js-{{ key }}_evalSocialPerson_healthProblemType d-block">
								<table class="table table-sm table-hover text-dark">
									<tbody>
										<tr id="js-{{ key }}_evalSocialPerson_healthProblemType-physicalHealthProblem" class="js-{{ key }}_evalSocialPerson_healthProblemType d-table-row">
											<th scope="row"><div class="sr-only">{{ form_widget(evalPerson.evalSocialPerson.physicalHealthProblem) }}</div></th>
											<td class="align-middle">Problématique de santé physique</td>
											<td><button class="btn btn-danger js-remove"><span class="fas fa-trash-alt"></span></button></td>
										</tr>
										<tr id="js-{{ key }}_evalSocialPerson_healthProblemType-mentalHealthProblem" class="js-{{ key }}_evalSocialPerson_healthProblemType d-table-row">
											<th scope="row"><div class="sr-only">{{ form_widget(evalPerson.evalSocialPerson.mentalHealthProblem) }}</div></th>
											<td class="align-middle">Problématique de santé mentale</td>
											<td><button class="btn btn-danger js-remove"><span class="fas fa-trash-alt"></span></button></td>
										</tr>
										<tr id="js-{{ key }}_evalSocialPerson_healthProblemType-addictionProblem" class="js-{{ key }}_evalSocialPerson_healthProblemType d-table-row">
											<th scope="row"><div class="sr-only">{{ form_widget(evalPerson.evalSocialPerson.addictionProblem) }}</div></th>
											<td class="align-middle">Problématique d'addiction</td>
											<td><button class="btn btn-danger js-remove"><span class="fas fa-trash-alt"></span></button></td>
										</tr>
										<tr id="js-{{ key }}_evalSocialPerson_healthProblemType-wheelchair" class="js-{{ key }}_evalSocialPerson_healthProblemType d-table-row">
											<th scope="row"><div class="sr-only">{{ form_widget(evalPerson.evalSocialPerson.wheelchair) }}</div></th>
											<td class="align-middle">Personne en fauteuil roulant</td>
											<td><button class="btn btn-danger js-remove"><span class="fas fa-trash-alt"></span></button></td>
										</tr>
										<tr id="js-{{ key }}_evalSocialPerson_healthProblemType-reducedMobility" class="js-{{ key }}_evalSocialPerson_healthProblemType d-table-row">
											<th scope="row"><div class="sr-only">{{ form_widget(evalPerson.evalSocialPerson.reducedMobility) }}</div></th>
											<td class="align-middle">Personne à mobilité réduite</td>
											<td><button class="btn btn-danger js-remove"><span class="fas fa-trash-alt"></span></button></td>
										</tr>
									</tbody>
								</table>
							</div>
        				</div>		
					</div>
				</div>
			</div>

            <div class="form-group row">
                <div class="col-md-6 js-{{ key }}_evalSocialPerson_healthProblem d-block">{{ form_row(evalPerson.evalSocialPerson.careSupport) }}</div>
                <div class="col-md-6 js-{{ key }}_evalSocialPerson_careSupport d-block">{{ form_row(evalPerson.evalSocialPerson.careSupportType) }}</div>
            </div>

            <div class="form-group row">
                <div class="col-md-6">{{ form_row(evalPerson.evalSocialPerson.childWelfareBackground) }}</div>
            </div>
            <div class="form-group row">
                <div class="col-md-6">{{ form_row(evalPerson.evalSocialPerson.familyBreakdown) }}</div>
                <div class="col-md-6">{{ form_row(evalPerson.evalSocialPerson.friendshipBreakdown) }}</div>
            </div>
            <div class="form-group row">
                <div class="col-md-6">{{ form_row(evalPerson.evalSocialPerson.violenceVictim) }}</div>
                <div class="col-md-6 js-{{ key }}_evalSocialPerson_violenceVictim d-block">{{ form_row(evalPerson.evalSocialPerson.domViolenceVictim) }}</div>
            </div>
            <div class="form-group row">
                {{ form_label(evalPerson.evalSocialPerson.commentEvalSocialPerson) }}
                <div class="col-md-12">
                    {{ form_widget(evalPerson.evalSocialPerson.commentEvalSocialPerson) }}
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>

<hr>

<div class="form-group row">
    <div class="col-md-6"> {{ form_row(form.evalSocialGroup.reasonRequest) }}</div>
    <div class="col-md-6"> {{ form_row(form.evalSocialGroup.wanderingTime) }}</div>
</div>
<div class="form-group row">
    <div class="col-md-6"> {{ form_row(form.evalSocialGroup.animal) }}</div>
    <div class="col-md-6 js-animal d-block"> {{ form_row(form.evalSocialGroup.animalType) }}</div>
</div>

<div class="form-group row">
    {{ form_label(form.evalSocialGroup.commentEvalSocialGroup) }}
    <div class="col-md-12">
        {{ form_widget(form.evalSocialGroup.commentEvalSocialGroup) }}
    </div>
</div>
{% endblock %}