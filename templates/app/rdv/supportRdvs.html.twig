{% extends "base.html.twig" %}

{% form_theme form_search "bootstrap_4_layout.html.twig" %}

{% block title %}Rendez-vous | {{ title_website }}{% endblock %}

{% block stylesheets %}{% endblock %}

{% block body %}

<div class="container">

	{% set title = "Rendez-vous" %}
	{% include "app/support/navSuppport.html.twig" %}

	<div class="row">
		<div class="d-flex col-md-6 mb-1 align-items-center">
            <a class="h3 fas fa-calendar-alt mr-2 mb-0 text-{{ theme_color }}" href="{{ path('support_calendar_show', {'id':support.id}) }}" title="Passer en vue agenda"></a>
			<a id="js-new-rdv" class="btn btn-{{ theme_color }} btn-sm shadow mr-2" href="{{ path('support_calendar_show', {'id':support.id}) }}" data-placement="bottom" title="Ajouter un rdv">
				<span class="fas fa-plus-square mr-2"></span>Nouveau RDV</a>
			<div class="d-inline align-middle">Total :
				<span id="count-rdvs">{{ rdvs.getTotalItemCount|number_format(0,'', ' ')}}</span>
				rdv{% if rdvs.getTotalItemCount > 1 %}s{% endif %}.
			</div>
		</div>
		<div class="col-md-6">
			<div class="navigation">{{ knp_pagination_render(rdvs) }}</div>
		</div>
	</div>

	{% include "app/rdv/searchSupportRdvs.html.twig" %}

    <div class="row mb-4">
        <div class="table-responsive">
            <table id="table-rdvs" class="table table-striped table-hover text-dark">
                <thead>
                    <tr>
                        <th scope="col" class="align-middle th-w-20"></th>
                        <th scope="col" class="align-middle th-w-120">{{ knp_pagination_sortable(rdvs, "Titre RDV", "r.title") }}</th>
                        <th scope="col" class="align-middle th-date">{{ knp_pagination_sortable(rdvs, "Date", "r.start") }}</th>
                        <th scope="col" class="align-middle th-w-150">{{ knp_pagination_sortable(rdvs, "Contenu", "r.content") }}</th>
                        <th scope="col" class="align-middle th-w-100">{{ knp_pagination_sortable(rdvs, "Lieu", "r.location") }}</th>
                    </tr>
                </thead>
                <tbody>
                    {% for rdv in rdvs %}
                    <tr id="rdv-{{ rdv.id }}">
                        <th scope="row"></th>
                        <td class="align-middle">{{ rdv.title }}</td>
                        <td class="align-middle">{{ rdv.start|date("d/m/Y") }}<br/>{{ rdv.start|date("H:i") }} â€“ {{ rdv.end|date("H:i") }}</td>
                        <td class="align-middle">{{ rdv.content }}</td>
                        <td class="align-middle">{{ rdv.location }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

    <div class="navigation">{{ knp_pagination_render(rdvs) }}</div>
    </div>

</div>

{% endblock %}

{% block javascripts %}
{{ encore_entry_script_tags("search") }}
{% endblock javascripts %}